<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="../static/format/bootstrap/css/bootstrap.min.css">
    <title>Somnilopy</title>
    <style>
      @font-face {
      font-family: "AlteHaasGrotesk";
      src: url("static/format/font/AlteHaasGrotesk.eot"); /* IE9 Compat Modes */
      src: url("static/format/font/AlteHaasGrotesk.eot?#iefix") format('embedded-opentype'), /* IE6-IE8 */
      url('static/format/font/AlteHaasGrotesk.woff') format('woff'), /* Modern Browsers */
      url('static/format/font/AlteHaasGrotesk.ttf')  format('truetype'), /* Safari, Android, iOS */
      url('static/format/font/AlteHaasGrotesk.svg#svgFontName') format('svg'); /* Legacy iOS */
      font-weight: normal;
      }
      h1, h2, h3, h4 {
      font-family: "AlteHaasGrotesk";
      }
      #jumbotron {
      background-color: #ffff
      }
      .nav-link{
      margin-left: 0px;
      padding-left: 0px;
      padding-right: 30px;
      color: #555555;
      font-size: 10pt;
      }
      a.disabled:hover {
      cursor: default;
      }
      a:hover {
        color: navy
      }
      .active {
      color: teal;
      }
      p {
      padding-bottom: 10px;
      }
      html {
        overflow: -moz-scrollbars-vertical; 
        overflow-y: scroll;
      }
      body,div, footer {
        font-size: 13px;
        background-color: #F4F7F3 !important;
      }
    </style>
  </head>
  <body>    
    <div class="jumbotron jumbotron-fluid" style="background-color: white; padding-bottom: 25px">
      <div class="container">
        <div class="row">
          <div class="col-sm-2">
            <font style="font-size:20px">Somnilopy</font>
          </div>
          <div class="col">
            <nav class="nav">
              <a class="nav-link active" href="index.html">Overview</a>
              <a class="nav-link disabled"> | </a>
              <a class="nav-link" href="https://mqiu.io">mqiu.io</a>
              <a class="nav-link" href="https://github.com/mfmmq/somnilopy">Github</a>
            </nav>
          </div>
        </div>
          
      </div>
    </div>
    <div class="row">
      <div class="col-sm-9">
          <div class="card-body">
              <canvas id="myChart"></canvas>
          </div>
      </div>
    </div>
    <div class="jumbotron jumbotron-fluid" style="background-color: white; padding-bottom: 25px">
      <div class="container">    <div class="row">
      <div class="col"><div id="info">teset</div></div>
    </div></div>

    </div>
    <footer class="jumbotron jumbotron-fluid" style="background-color: white; margin-top:30px; margin-bottom: 0px;">
      <div class="container" style="font-size:10px; color: #777777">
        ------------------------------------------------------------------------<br>
      </div>
    </footer>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="../static/format/chart.min.js"></script>
    <script>
      var file_info = [
        {"start_time": "00:31", "length": "90", "path": ""},
        {"start_time": "04:31", "length": "360", "path": ""},
        {"start_time": "02:01", "length": "40", "path": ""},
        {"start_time": "00:51", "length": "20", "path": ""},
        {"start_time": "05:55", "length": "200", "path": ""}
    ];

    var file_info = {{file_info}}

    var recording_lengths = Array(file_info.length)
    for (i = 0; i < file_info.length; i++) {
        recording_lengths[i] = file_info[i]["length"]
    }

    var time_labels = Array(file_info.length);
    for (i = 0; i < file_info.length; i++) {
        time_labels[i] = file_info[i]["start_time"]
    }

    var barchartdata =  {
            labels: time_labels,
            datasets: [
                {
                label: 's',
                data: recording_lengths,
                borderWidth: 1
            }]
        };

    function load_file_info() {
        var file_info_html = ""
        for (i=0; i<file_info.length; i++) {

        }
        document.getElementById('info').innerHTML = ""
    }

    var ctx = document.getElementById('myChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: barchartdata,
        defaultFontFamily: "'AlteHaasGrotesk','format/font/AlteHaasGrotesk.eot','format/font/AlteHaasGrotesk.woff','format/font/AlteHaasGrotesk.ttf'",
        options: {
            legend: {
                display: false
            },
            onClick: function(evt) {
                var element = myChart.getElementAtEvent(evt);
                if(element.length > 0) {
                    var ind = element[0]._index;
                    if(confirm('Do you want to remove this point?')){
                        document.getElementById('info').innerHTML = "Hello";
                        data.datasets[0].data.splice(ind, 1);
                        document.getElementById('info').innerHTML = "Hello1";
                        data.labels.splice(ind, 1);
                        document.getElementById('info').innerHTML = "Hello2";
                        myChart.update(data);
                    }}

            },
            tooltips: {
              mode: 'index',
              intersect: true,
              displayColors: false
            },
            scales: {
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: "Length in Seconds"},
                    ticks: {
                        beginAtZero: true
                    },
                    stacked: true,
                    gridLines: {
                        display: true,
                        drawBorder: true,
                        drawOnChartArea: false
                    }
                }],
                xAxes: [{
                    scaleLabel: {
                        display:true,
                        labelString: "Time of Day"
                    },
                    stacked: true,
                    gridLines: {
                        display: true,
                        drawBorder: true,
                        drawOnChartArea: false
                    }
                }

              ]
            }
        }
    });
    </script>
  </body>
  
</html>